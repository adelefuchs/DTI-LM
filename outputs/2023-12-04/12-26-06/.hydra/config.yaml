trainer:
  max_epochs: 200
logger:
  name: bindingDB
best_param_path: ./configs/best_params/
best_param_name: random_balanced_GAT.yaml
variant_pred: false
multiprocessing:
  multiprocessing: true
  num_process: 10
  concurrent_process: 10
preprocess:
  data_path: ./datasets/bindingDB/
  label: Kd
  threshold:
  - 30
  - 100
  binary: true
  convert_to_log: true
  name: bindingDB
module:
  _target_: module.GAT.Net
  network:
    drug_dim: 768
    prot_dim: 1280
    layers:
    - 512
    - 256
    dropout: 0.2
    output_dim: 1
    activation_fn: ReLU
  optimizer:
    optimizer: Adam
    lr: 0.00024614317367271417
    weight_decay: 0.0006755020499865177
  criterion:
    _target_: torch.nn.BCEWithLogitsLoss
  GAT_params:
    drug_gat:
      out_channels: 96
      heads: 8
      dropout: 0.3
      add_self_loops: false
      num_layers: 4
      threshold: 5
    prot_gat:
      out_channels: 160
      heads: 8
      dropout: 0.2
      add_self_loops: true
      num_layers: 2
      threshold: 2
    concat:
      concat: false
      alpha: 10
datamodule:
  _target_: datamodule.dataloader_GAT.UNIDataModule
  dm_cfg:
    batch_size: 128
    num_workers: 4
  splitting:
    ratio:
    - 0.79
    - 0.01
    - 0.2
    balanced: false
    unbalanced_ratio: 10
    splitting_strategy: random
    seed: 42
  serializer:
    load_serialized: true
    target_name: bindingDB_${preprocess.label}_ESM.pt
    drug_name: bindingDB_${preprocess.label}_PubChem10M.pt
    save_path: ./datasets/serialized/
callbacks:
  model_checkpoint:
    _target_: pytorch_lightning.callbacks.ModelCheckpoint
    dirpath: null
    filename: checkpoint_{epoch:03d}-{val_loss:.4f}-{val_auc:.4f}
    monitor: val_auc
    verbose: false
    save_last: true
    save_top_k: 5
    mode: max
    auto_insert_metric_name: true
    save_weights_only: false
    every_n_train_steps: null
    train_time_interval: null
    every_n_epochs: 1
    save_on_train_epoch_end: null
  early_stopping:
    _target_: pytorch_lightning.callbacks.EarlyStopping
    monitor: val_auc
    min_delta: 5.0e-05
    patience: 30
    verbose: false
    mode: max
    strict: true
    check_finite: true
    stopping_threshold: null
    divergence_threshold: null
    check_on_train_epoch_end: null
featurizer:
  drugfeaturizer:
    _target_: module.featurizer.drug_featurizer.chembert_featurizer.CHEMFEATURE
  protfeaturizer:
    _target_: module.featurizer.prot_featurizer.esm_featurizer.ESMFEATURE
tuning:
  param_search:
    tune: false
    search_space:
      lr:
        _target_: ray.tune.loguniform
        lower: 1.0e-05
        upper: 0.01
      batch_size:
        _target_: ray.tune.choice
        categories:
        - 128
        - 256
        - 512
        - 768
        - 1024
        - 1280
      dropout:
        _target_: ray.tune.choice
        categories:
        - 0.2
      layers:
        _target_: ray.tune.choice
        categories:
        - - 512
          - 256
        - - 256
          - 128
        - - 1024
          - 512
          - 256
        - - 512
          - 256
          - 128
        - - 256
          - 128
          - 64
        - - 1024
          - 512
          - 256
          - 128
        - - 512
          - 256
          - 128
          - 64
        - - 256
          - 128
          - 64
          - 32
        - - 2048
          - 1024
          - 256
          - 128
      activation_fn:
        _target_: ray.tune.choice
        categories:
        - ReLU
      optimizer:
        _target_: ray.tune.choice
        categories:
        - Adam
      drug_gat:
        out_channels:
          _target_: ray.tune.choice
          categories:
          - 64
          - 128
          - 256
          - 512
        heads:
          _target_: ray.tune.choice
          categories:
          - 2
          - 4
          - 8
        dropout:
          _target_: ray.tune.choice
          categories:
          - 0.1
          - 0.2
          - 0.3
        add_self_loops:
          _target_: ray.tune.choice
          categories:
          - true
          - false
        num_layers:
          _target_: ray.tune.choice
          categories:
          - 1
          - 2
          - 3
          - 4
      prot_gat:
        out_channels:
          _target_: ray.tune.choice
          categories:
          - 64
          - 128
          - 256
          - 512
        heads:
          _target_: ray.tune.choice
          categories:
          - 2
          - 4
          - 8
        dropout:
          _target_: ray.tune.choice
          categories:
          - 0.1
          - 0.2
          - 0.3
        add_self_loops:
          _target_: ray.tune.choice
          categories:
          - true
          - false
        num_layers:
          _target_: ray.tune.choice
          categories:
          - 1
          - 2
          - 3
          - 4
      drug_threshold:
        _target_: ray.tune.loguniform
        lower: 0.01
        upper: 7
      prot_threshold:
        _target_: ray.tune.loguniform
        lower: 0.01
        upper: 5
      alpha:
        _target_: ray.tune.choice
        categories:
        - 0.1
        - 1
        - 5
        - 10
        - 100
GAT: {}
